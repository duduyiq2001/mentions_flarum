{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/regenerator/index.js","webpack://@flarum/mentions/webpack/bootstrap","webpack://@flarum/mentions/webpack/runtime/compat get default export","webpack://@flarum/mentions/webpack/runtime/define property getters","webpack://@flarum/mentions/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/mentions/webpack/runtime/make namespace object","webpack://@flarum/mentions/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/utils/string']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/Post']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/PostPreview']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/Link']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/punctuateSeries']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/mentions/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@flarum/mentions/./src/forum/state/MentionedByModalState.ts","webpack://@flarum/mentions/./src/forum/components/MentionedByModal.tsx","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/EditPostComposer']\"","webpack://@flarum/mentions/./src/forum/utils/reply.js","webpack://@flarum/mentions/external root \"flarum.core.compat['common/Fragment']\"","webpack://@flarum/mentions/./src/forum/fragments/PostQuoteButton.js","webpack://@flarum/mentions/./src/forum/utils/selectedText.js","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@flarum/mentions/./src/forum/fragments/AutocompleteDropdown.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@flarum/mentions/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@flarum/mentions/./src/forum/components/MentionsDropdownItem.tsx","webpack://@flarum/mentions/external root \"flarum.core.compat['common/utils/throttleDebounce']\"","webpack://@flarum/mentions/./src/forum/mentionables/MentionableModels.tsx","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@flarum/mentions/./src/forum/components/PostMentionedNotification.js","webpack://@flarum/mentions/./src/forum/components/UserMentionedNotification.js","webpack://@flarum/mentions/./src/forum/components/GroupMentionedNotification.js","webpack://@flarum/mentions/./src/forum/mentionables/formats/MentionFormat.ts","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flarum/mentions/./src/forum/mentionables/MentionableModel.ts","webpack://@flarum/mentions/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@flarum/mentions/./src/forum/utils/getCleanDisplayName.js","webpack://@flarum/mentions/./src/forum/mentionables/UserMention.tsx","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@flarum/mentions/./src/forum/mentionables/PostMention.tsx","webpack://@flarum/mentions/external root \"flarum.core.compat['common/models/Group']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@flarum/mentions/./src/forum/mentionables/GroupMention.tsx","webpack://@flarum/mentions/./src/forum/mentionables/WorkflowMention.tsx","webpack://@flarum/mentions/./src/forum/mentionables/formats/AtMentionFormat.ts","webpack://@flarum/mentions/./src/forum/mentionables/TagMention.tsx","webpack://@flarum/mentions/./src/forum/mentionables/formats/HashMentionFormat.ts","webpack://@flarum/mentions/./src/forum/mentionables/formats/MentionFormats.ts","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/models/User']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/extenders']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['common/models/Post']\"","webpack://@flarum/mentions/external root \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@flarum/mentions/./src/forum/components/MentionsUserPage.js","webpack://@flarum/mentions/./src/forum/extend.ts","webpack://@flarum/mentions/./src/forum/utils/textFormatter.js","webpack://@flarum/mentions/./src/forum/compat.js","webpack://@flarum/mentions/./src/forum/utils/getMentionText.js","webpack://@flarum/mentions/./src/forum/extenders/Mentionables.ts","webpack://@flarum/mentions/external assign \"flarum.core\"","webpack://@flarum/mentions/./src/forum/index.js","webpack://@flarum/mentions/./src/forum/addComposerAutocomplete.js","webpack://@flarum/mentions/./src/forum/addPostMentionPreviews.js","webpack://@flarum/mentions/./src/forum/addMentionedByList.js","webpack://@flarum/mentions/./src/forum/addPostReplyAction.js","webpack://@flarum/mentions/./src/forum/addPostQuoteButton.js"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostPreview'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/punctuateSeries'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/states/PaginatedListState'];","import PaginatedListState, { PaginatedListParams } from 'flarum/common/states/PaginatedListState';\nimport Post from 'flarum/common/models/Post';\n\nexport interface MentionedByModalListParams extends PaginatedListParams {\n  filter: {\n    mentionedPost: string;\n  };\n  sort?: string;\n  page?: {\n    offset?: number;\n    limit: number;\n  };\n}\n\nexport default class MentionedByModalState<P extends MentionedByModalListParams = MentionedByModalListParams> extends PaginatedListState<Post, P> {\n  constructor(params: P, page: number = 1) {\n    const limit = 10;\n\n    params.page = { ...(params.page || {}), limit };\n\n    super(params, page, limit);\n  }\n\n  get type(): string {\n    return 'posts';\n  }\n}\n","import app from 'flarum/forum/app';\nimport PostPreview from 'flarum/forum/components/PostPreview';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport type Mithril from 'mithril';\nimport type Post from 'flarum/common/models/Post';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Button from 'flarum/common/components/Button';\nimport MentionedByModalState from '../state/MentionedByModalState';\n\nexport interface IMentionedByModalAttrs extends IInternalModalAttrs {\n  post: Post;\n}\n\nexport default class MentionedByModal<CustomAttrs extends IMentionedByModalAttrs = IMentionedByModalAttrs> extends Modal<\n  CustomAttrs,\n  MentionedByModalState\n> {\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.state = new MentionedByModalState({\n      filter: {\n        mentionedPost: this.attrs.post.id()!,\n      },\n      sort: 'number',\n    });\n\n    this.state.refresh();\n  }\n\n  className(): string {\n    return 'MentionedByModal';\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('flarum-mentions.forum.mentioned_by.title');\n  }\n\n  content(): Mithril.Children {\n    return (\n      <>\n        <div className=\"Modal-body\">\n          {this.state.isInitialLoading() ? (\n            <LoadingIndicator />\n          ) : (\n            <>\n              <ul className=\"MentionedByModal-list Dropdown-menu Dropdown-menu--inline Post-mentionedBy-preview\">\n                {this.state.getPages().map((page) =>\n                  page.items.map((reply) => (\n                    <li data-number={reply.number()}>\n                      <PostPreview post={reply} onclick={() => app.modal.close()} />\n                    </li>\n                  ))\n                )}\n              </ul>\n            </>\n          )}\n        </div>\n        {this.state.hasNext() && (\n          <div className=\"Modal-footer\">\n            <div className=\"Form Form--centered\">\n              <div className=\"Form-group\">\n                <Button className=\"Button Button--block\" onclick={() => this.state.loadNext()} loading={this.state.isLoadingNext()}>\n                  {app.translator.trans('flarum-mentions.forum.mentioned_by.load_more_button')}\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/EditPostComposer'];","import app from 'flarum/forum/app';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport EditPostComposer from 'flarum/forum/components/EditPostComposer';\n\nexport function insertMention(post, composer, quote) {\n  return new Promise((resolve) => {\n    const mention = app.mentionFormats.mentionable('post').replacement(post) + ' ';\n\n    // If the composer is empty, then assume we're starting a new reply.\n    // In which case we don't want the user to have to confirm if they\n    // close the composer straight away.\n    if (!composer.fields.content()) {\n      composer.body.attrs.originalContent = mention;\n    }\n\n    const cursorPosition = composer.editor.getSelectionRange()[0];\n    const preceding = composer.fields.content().slice(0, cursorPosition);\n    const precedingNewlines = preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\n\n    composer.editor.insertAtCursor(\n      Array(precedingNewlines).join('\\n') + // Insert up to two newlines, depending on preceding whitespace\n        (quote ? '> ' + mention + quote.trim().replace(/\\n/g, '\\n> ') + '\\n\\n' : mention),\n      false\n    );\n    return resolve(composer);\n  });\n}\n\nexport default function reply(post, quote) {\n  if (app.composer.bodyMatches(EditPostComposer) && app.composer.body.attrs.post.discussion() === post.discussion()) {\n    // If we're already editing a post in the discussion of post we're quoting,\n    // insert the mention directly.\n    return insertMention(post, app.composer, quote);\n  } else {\n    // The default \"Reply\" action behavior will only open a new composer if\n    // necessary, but it will always be a ReplyComposer, hence the exceptional\n    // case above.\n    return DiscussionControls.replyAction.call(post.discussion()).then((composer) => insertMention(post, composer, quote));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Fragment'];","import app from 'flarum/forum/app';\nimport Fragment from 'flarum/common/Fragment';\nimport icon from 'flarum/common/helpers/icon';\n\nimport reply from '../utils/reply';\n\nexport default class PostQuoteButton extends Fragment {\n  constructor(post) {\n    super();\n\n    this.post = post;\n  }\n\n  view() {\n    return (\n      <button\n        className=\"Button PostQuoteButton\"\n        onclick={() => {\n          reply(this.post, this.content);\n        }}\n      >\n        {icon('fas fa-quote-left', { className: 'Button-icon' })}\n        {app.translator.trans('flarum-mentions.forum.post.quote_button')}\n      </button>\n    );\n  }\n\n  show(left, top) {\n    const $this = this.$().show();\n    const parentOffset = $this.offsetParent().offset();\n\n    $this.css('left', left - parentOffset.left).css('top', top - parentOffset.top);\n\n    this.hideHandler = this.hide.bind(this);\n    $(document).on('mouseup', this.hideHandler);\n  }\n\n  showStart(left, top) {\n    const $this = this.$();\n\n    this.show(left, $(window).scrollTop() + top - $this.outerHeight() - 5);\n  }\n\n  showEnd(right, bottom) {\n    const $this = this.$();\n\n    this.show(right - $this.outerWidth(), $(window).scrollTop() + bottom + 5);\n  }\n\n  hide() {\n    this.$().hide();\n    $(document).off('mouseup', this.hideHandler);\n  }\n}\n","/**\n * Finds the selected text in the provided composer body.\n */\nexport default function selectedText(body) {\n  const selection = window.getSelection();\n\n  if (!selection.isCollapsed) {\n    const range = selection.getRangeAt(0);\n    const parent = range.commonAncestorContainer;\n\n    if (body[0] === parent || $.contains(body[0], parent)) {\n      const clone = $('<div>').append(range.cloneContents());\n\n      // Replace emoji images with their shortcode (found in alt attribute)\n      clone.find('img.emoji').replaceWith(function () {\n        return this.alt;\n      });\n\n      // Replace all other images with a Markdown image\n      clone.find('img').replaceWith(function () {\n        return `![](${this.src})`;\n      });\n\n      // Replace all links with a Markdown link\n      clone.find('a').replaceWith(function () {\n        return `[${this.innerText}](${this.href})`;\n      });\n\n      return clone.text();\n    }\n  }\n  return '';\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditorButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","import Fragment from 'flarum/common/Fragment';\n\nexport default class AutocompleteDropdown extends Fragment {\n  items = [];\n  active = false;\n  index = 0;\n  keyWasJustPressed = false;\n\n  view() {\n    return (\n      <ul className=\"Dropdown-menu MentionsDropdown\">\n        {this.items.map((item) => (\n          <li>{item}</li>\n        ))}\n      </ul>\n    );\n  }\n\n  show(left, top) {\n    this.$()\n      .show()\n      .css({\n        left: left + 'px',\n        top: top + 'px',\n      });\n    this.active = true;\n  }\n\n  hide() {\n    this.$().hide();\n    this.active = false;\n  }\n\n  navigate(delta) {\n    this.keyWasJustPressed = true;\n    this.setIndex(this.index + delta, true);\n    clearTimeout(this.keyWasJustPressedTimeout);\n    this.keyWasJustPressedTimeout = setTimeout(() => (this.keyWasJustPressed = false), 500);\n  }\n\n  complete() {\n    this.$('li').eq(this.index).find('button').click();\n  }\n\n  setIndex(index, scrollToItem) {\n    if (this.keyWasJustPressed && !scrollToItem) return;\n\n    const $dropdown = this.$();\n    const $items = $dropdown.find('li');\n    let rangedIndex = index;\n\n    if (rangedIndex < 0) {\n      rangedIndex = $items.length - 1;\n    } else if (rangedIndex >= $items.length) {\n      rangedIndex = 0;\n    }\n\n    this.index = rangedIndex;\n\n    const $item = $items.removeClass('active').eq(rangedIndex).addClass('active');\n\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import Component from 'flarum/common/Component';\nimport type { ComponentAttrs } from 'flarum/common/Component';\nimport classList from 'flarum/common/utils/classList';\nimport type MentionableModel from '../mentionables/MentionableModel';\nimport type Mithril from 'mithril';\n\nexport interface IMentionsDropdownItemAttrs extends ComponentAttrs {\n  mentionable: MentionableModel;\n  onclick: () => void;\n  onmouseenter: () => void;\n}\n\nexport default class MentionsDropdownItem<CustomAttrs extends IMentionsDropdownItemAttrs> extends Component<CustomAttrs> {\n  view(vnode: Mithril.Vnode<CustomAttrs>): Mithril.Children {\n    const { mentionable, ...attrs } = this.attrs;\n\n    const className = classList('MentionsDropdownItem', 'PostPreview', `MentionsDropdown-${mentionable.type()}`);\n\n    return (\n      <button className={className} {...attrs}>\n        <span className=\"PostPreview-content\">{vnode.children}</span>\n      </button>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/throttleDebounce'];","import type MentionableModel from './MentionableModel';\nimport type Model from 'flarum/common/Model';\nimport type Mithril from 'mithril';\nimport MentionsDropdownItem from '../components/MentionsDropdownItem';\nimport { throttle } from 'flarum/common/utils/throttleDebounce';\n\nexport default class MentionableModels {\n  protected mentionables?: MentionableModel[];\n  /**\n   * We store models returned from an API here to preserve order in which they are returned\n   * This prevents the list jumping around while models are returned.\n   * We also use a hashmap for model IDs to provide O(1) lookup for the users already in the list.\n   */\n  private results: Record<string, Map<string, Model>> = {};\n  public typed: string | null = null;\n  private searched: string[] = [];\n  private dropdownItemAttrs: Record<string, any> = {};\n\n  constructor(dropdownItemAttrs: Record<string, any>) {\n    this.dropdownItemAttrs = dropdownItemAttrs;\n  }\n\n  public init(mentionables: MentionableModel[]): void {\n    this.typed = null;\n    this.mentionables = mentionables;\n    console.log('{ebjdbjedededwdwdwdwd');\n    console.log(this.mentionables);\n\n    for (const mentionable of this.mentionables) {\n      if (mentionable.type() != 'workflow') {\n        this.results[mentionable.type()] = new Map(mentionable.initialResults().map((result) => [result.id() as string, result]));\n      } else {\n        this.results[mentionable.type()] = new Map();\n      }\n    }\n  }\n\n  /**\n   * Don't send API calls searching for models until at least 2 characters have been typed.\n   * This focuses the mention results on models already loaded.\n   */\n  public readonly search = throttle(250, async (): Promise<void> => {\n    if (!this.typed || this.typed.length <= 1) return;\n\n    const typedLower = this.typed.toLowerCase();\n\n    if (this.searched.includes(typedLower)) return;\n\n    for (const mentionable of this.mentionables!) {\n      //if workflow then skip\n      console.log('{ebjdbjededed');\n      if (mentionable.type() == 'workflow' || 'project') {\n        this.results[mentionable.type()].set('workflow', typedLower);\n      } else {\n        for (const model of await mentionable.search(typedLower)) {\n          if (!this.results[mentionable.type()].has(model.id() as string)) {\n            this.results[mentionable.type()].set(model.id() as string, model);\n          }\n        }\n      }\n    }\n\n    this.searched.push(typedLower);\n\n    return Promise.resolve();\n  });\n\n  public matches(mentionable: MentionableModel, model: Model): boolean {\n    //console.log('{ebjdbjedededqsqsqss');\n    return mentionable.matches(model, this.typed?.toLowerCase() || '');\n  }\n\n  public makeSuggestion(mentionable: MentionableModel, model: Model): Mithril.Children {\n    // console.log('xwmksmslmls');\n    const content = mentionable.suggestion(model, this.typed!);\n    const replacement = mentionable.replacement(model);\n\n    const { onclick, ...attrs } = this.dropdownItemAttrs;\n\n    return (\n      <MentionsDropdownItem mentionable={mentionable} onclick={() => onclick(replacement)} {...attrs}>\n        {content}\n      </MentionsDropdownItem>\n    );\n  }\n\n  public buildSuggestions(): Mithril.Children {\n    const suggestions: Mithril.Children = [];\n    console.log('wnkjdwd');\n    console.log('this.results', this.results);\n    for (const mentionable of this.mentionables!) {\n      if (!mentionable.enabled()) continue;\n      console.log(mentionable);\n      if (mentionable.type() != 'workflow') {\n        let matches = Array.from(this.results[mentionable.type()].values()).filter((model) => this.matches(mentionable, model));\n        console.log(matches);\n        const max = mentionable.maxStoreMatchedResults();\n        if (max) matches = matches.splice(0, max);\n\n        for (const model of matches) {\n          const dropdownItem = this.makeSuggestion(mentionable, model);\n          suggestions.push(dropdownItem);\n        }\n      } else {\n        if (this.matches(mentionable, { id: 'workflow' })) {\n          const dropdownItem = this.makeSuggestion(mentionable, { id: 'workflow' });\n          suggestions.push(dropdownItem);\n        }\n      }\n    }\n\n    return suggestions;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class PostMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-reply';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const post = notification.subject();\n    const content = notification.content();\n\n    return app.route.discussion(post.discussion(), content && content.replyNumber);\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    const user = notification.fromUser();\n\n    return app.translator.trans('flarum-mentions.forum.notifications.post_mentioned_text', { user, count: 1 });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain() || '', 200);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class UserMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-at';\n  }\n\n  href() {\n    const post = this.attrs.notification.subject();\n\n    return app.route.discussion(post.discussion(), post.number());\n  }\n\n  content() {\n    const user = this.attrs.notification.fromUser();\n\n    return app.translator.trans('flarum-mentions.forum.notifications.user_mentioned_text', { user });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class GroupMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-at';\n  }\n\n  href() {\n    const post = this.attrs.notification.subject();\n\n    return app.route.discussion(post.discussion(), post.number());\n  }\n\n  content() {\n    const user = this.attrs.notification.fromUser();\n\n    return app.translator.trans('flarum-mentions.forum.notifications.group_mentioned_text', { user });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","import type MentionableModel from '../MentionableModel';\nimport type Model from 'flarum/common/Model';\n\nexport default abstract class MentionFormat {\n  protected instances?: MentionableModel[];\n\n  public makeMentionables(): MentionableModel[] {\n    return this.instances ?? (this.instances = this.mentionables.map((Mentionable) => new Mentionable(this)));\n  }\n\n  public getMentionable(type: string): MentionableModel | null {\n    return this.makeMentionables().find((mentionable) => mentionable.type() === type) ?? null;\n  }\n\n  public extend(mentionable: new (...args: any[]) => MentionableModel): void {\n    if (!this.extendable) throw new Error('This mention format does not allow extending.');\n\n    this.mentionables.push(mentionable);\n  }\n\n  abstract mentionables: (new (...args: any[]) => MentionableModel)[];\n\n  protected abstract extendable: boolean;\n\n  abstract trigger(): string;\n\n  /**\n   * Picks the term to search in the API from the typed text.\n   * @example:\n   *  * Full text = `Hello @\"John D`\n   *  * Typed text = `\"John D`\n   *  * Query = `John D`\n   */\n  abstract queryFromTyped(typed: string): string | null;\n\n  abstract format(...args: any): string;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","import type Mithril from 'mithril';\nimport type Model from 'flarum/common/Model';\nimport type MentionFormat from './formats/MentionFormat';\n\nexport default abstract class MentionableModel<M extends Model = Model, Format extends MentionFormat = MentionFormat> {\n  public format: Format;\n\n  public constructor(format: Format) {\n    this.format = format;\n  }\n\n  abstract type(): string;\n  abstract initialResults(): M[];\n  abstract search(typed: string): Promise<M[]>;\n  abstract replacement(model: M): string;\n  abstract suggestion(model: M, typed: string): Mithril.Children;\n  abstract matches(model: M, typed: string): boolean;\n  abstract maxStoreMatchedResults(): number | null;\n  abstract enabled(): boolean;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import app from 'flarum/forum/app';\nimport extractText from 'flarum/common/utils/extractText';\n\n/**\n * Whether to use the old mentions format.\n *\n * `'@username'` or `'@\"Display name\"'`\n */\nexport const shouldUseOldFormat = () => app.forum.attribute('allowUsernameMentionFormat') || false;\n\nconst getDeletedUserText = () => extractText(app.translator.trans('core.lib.username.deleted_text'));\n\n/**\n * Fetches a user's username or display name.\n *\n * Chooses based on the format option set in the admin settings page.\n *\n * @param user An instance of the User model to fetch the username for\n * @param useDisplayName If `true`, uses `user.displayName()`, otherwise, uses `user.username()`\n */\nexport default function getCleanDisplayName(user, useDisplayName = true) {\n  if (!user) return getDeletedUserText().replace(/\"#[a-z]{0,3}[0-9]+/, '_');\n\n  const text = (useDisplayName ? user.displayName() : user.username()) || getDeletedUserText();\n\n  return text.replace(/\"#[a-z]{0,3}[0-9]+/, '_');\n}\n","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport type User from 'flarum/common/models/User';\nimport usernameHelper from 'flarum/common/helpers/username';\nimport avatar from 'flarum/common/helpers/avatar';\nimport highlight from 'flarum/common/helpers/highlight';\nimport MentionableModel from './MentionableModel';\nimport getCleanDisplayName, { shouldUseOldFormat } from '../utils/getCleanDisplayName';\nimport AtMentionFormat from './formats/AtMentionFormat';\n\nexport default class UserMention extends MentionableModel<User, AtMentionFormat> {\n  type(): string {\n    return 'user';\n  }\n\n  initialResults(): User[] {\n    return Array.from(app.store.all<User>('users'));\n  }\n\n  /**\n   * Automatically determines which mention syntax to be used based on the option in the\n   * admin dashboard. Also performs display name clean-up automatically.\n   *\n   * @\"Display name\"#UserID or `@username`\n   *\n   * @example <caption>New display name syntax</caption>\n   * // '@\"user\"#1'\n   * forUser(User) // User is ID 1, display name is 'User'\n   *\n   * @example <caption>Using old syntax</caption>\n   * // '@username'\n   * forUser(user) // User's username is 'username'\n   */\n  public replacement(user: User): string {\n    if (shouldUseOldFormat()) {\n      const cleanText = getCleanDisplayName(user, false);\n      return this.format.format(cleanText);\n    }\n\n    const cleanText = getCleanDisplayName(user);\n    return this.format.format(cleanText, '', user.id());\n  }\n\n  suggestion(model: User, typed: string): Mithril.Children {\n    const username = usernameHelper(model);\n\n    if (typed) {\n      username.children = [highlight((username.text ?? '') as string, typed)];\n      delete username.text;\n    }\n\n    return (\n      <>\n        {avatar(model)}\n        {username}\n      </>\n    );\n  }\n\n  matches(model: User, typed: string): boolean {\n    if (!typed) return false;\n\n    const names = [model.username(), model.displayName()];\n\n    return names.some((name) => name.toLowerCase().substr(0, typed.length) === typed);\n  }\n\n  maxStoreMatchedResults(): null {\n    return null;\n  }\n\n  async search(typed: string): Promise<User[]> {\n    return await app.store.find<User[]>('users', { filter: { q: typed }, page: { limit: 5 } });\n  }\n\n  enabled(): boolean {\n    return true;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ReplyComposer'];","import app from 'flarum/forum/app';\nimport MentionableModel from './MentionableModel';\nimport type Post from 'flarum/common/models/Post';\nimport type Mithril from 'mithril';\nimport usernameHelper from 'flarum/common/helpers/username';\nimport avatar from 'flarum/common/helpers/avatar';\nimport highlight from 'flarum/common/helpers/highlight';\nimport { truncate } from 'flarum/common/utils/string';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\nimport EditPostComposer from 'flarum/forum/components/EditPostComposer';\nimport getCleanDisplayName from '../utils/getCleanDisplayName';\nimport type AtMentionFormat from './formats/AtMentionFormat';\n\nexport default class PostMention extends MentionableModel<Post, AtMentionFormat> {\n  type(): string {\n    return 'post';\n  }\n\n  /**\n   * If the user is replying to a discussion, or if they are editing a\n   * post, then we can suggest other posts in the discussion to mention.\n   * We will add the 5 most recent comments in the discussion which\n   * match any username characters that have been typed.\n   */\n  initialResults(): Post[] {\n    if (!app.composer.bodyMatches(ReplyComposer) && !app.composer.bodyMatches(EditPostComposer)) {\n      return [];\n    }\n\n    // @ts-ignore\n    const composerAttrs = app.composer.body.attrs;\n    const composerPost = composerAttrs.post;\n    const discussion = (composerPost && composerPost.discussion()) || composerAttrs.discussion;\n\n    return (\n      discussion\n        .posts()\n        // Filter to only comment posts, and replies before this message\n        .filter((post: Post) => post && post.contentType() === 'comment' && (!composerPost || post.number() < composerPost.number()))\n        // Sort by new to old\n        .sort((a: Post, b: Post) => b.createdAt().getTime() - a.createdAt().getTime())\n    );\n  }\n\n  /**\n   * Generates the syntax for mentioning of a post. Also cleans up the display name.\n   *\n   * @example <caption>Post mention</caption>\n   * // '@\"User\"#p13'\n   * // @\"Display name\"#pPostID\n   * forPostMention(user, 13) // User display name is 'User', post ID is 13\n   */\n  public replacement(post: Post): string {\n    const user = post.user();\n    const cleanText = getCleanDisplayName(user);\n    return this.format.format(cleanText, 'p', post.id());\n  }\n\n  suggestion(model: Post, typed: string): Mithril.Children {\n    const user = model.user() || null;\n    const username = usernameHelper(user);\n\n    if (typed) {\n      username.children = [highlight((username.text ?? '') as string, typed)];\n      delete username.text;\n    }\n\n    return (\n      <>\n        {avatar(user)}\n        {username}\n        {[\n          app.translator.trans('flarum-mentions.forum.composer.reply_to_post_text', { number: model.number() }),\n          '  ',\n          truncate(model.contentPlain() ?? '', 200),\n        ]}\n      </>\n    );\n  }\n\n  matches(model: Post, typed: string): boolean {\n    const user = model.user();\n    const userMentionable = app.mentionFormats.mentionable('user')!;\n\n    return !typed || (user && userMentionable.matches(user, typed));\n  }\n\n  maxStoreMatchedResults(): number {\n    return 5;\n  }\n\n  /**\n   * Post mention suggestions are only offered from current discussion posts.\n   */\n  search(typed: string): Promise<Post[]> {\n    return Promise.resolve([]);\n  }\n\n  enabled(): boolean {\n    return true;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport MentionableModel from './MentionableModel';\nimport type Mithril from 'mithril';\nimport Badge from 'flarum/common/components/Badge';\nimport highlight from 'flarum/common/helpers/highlight';\nimport type AtMentionFormat from './formats/AtMentionFormat';\n\nexport default class GroupMention extends MentionableModel<Group, AtMentionFormat> {\n  type(): string {\n    return 'group';\n  }\n\n  initialResults(): Group[] {\n    return Array.from(\n      app.store.all<Group>('groups').filter((g: Group) => {\n        return g.id() !== Group.GUEST_ID && g.id() !== Group.MEMBER_ID;\n      })\n    );\n  }\n\n  /**\n   * Generates the mention syntax for a group mention.\n   *\n   * @\"Name Plural\"#gGroupID\n   *\n   * @example <caption>Group mention</caption>\n   * // '@\"Mods\"#g4'\n   * forGroup(group) // Group display name is 'Mods', group ID is 4\n   */\n  public replacement(group: Group): string {\n    return this.format.format(group.namePlural(), 'g', group.id());\n  }\n\n  suggestion(model: Group, typed: string): Mithril.Children {\n    let groupName: Mithril.Children = model.namePlural();\n\n    if (typed) {\n      groupName = highlight(groupName, typed);\n    }\n\n    return (\n      <>\n        <Badge className={`Avatar Badge Badge--group--${model.id()} Badge-icon`} color={model.color()} type=\"group\" icon={model.icon()} />\n        <span className=\"username\">{groupName}</span>\n      </>\n    );\n  }\n\n  matches(model: Group, typed: string): boolean {\n    if (!typed) return false;\n\n    const names = [model.namePlural().toLowerCase(), model.nameSingular().toLowerCase()];\n\n    return names.some((name) => name.toLowerCase().substr(0, typed.length) === typed);\n  }\n\n  maxStoreMatchedResults(): null {\n    return null;\n  }\n\n  /**\n   * All groups are already loaded, so we don't need to search for them.\n   */\n  search(typed: string): Promise<Group[]> {\n    return Promise.resolve([]);\n  }\n\n  enabled(): boolean {\n    return app.session?.user?.canMentionGroups() ?? false;\n  }\n}\n","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport type User from 'flarum/common/models/User';\nimport usernameHelper from 'flarum/common/helpers/username';\nimport avatar from 'flarum/common/helpers/avatar';\nimport highlight from 'flarum/common/helpers/highlight';\nimport MentionableModel from './MentionableModel';\nimport getCleanDisplayName, { shouldUseOldFormat } from '../utils/getCleanDisplayName';\nimport AtMentionFormat from './formats/AtMentionFormat';\n\nexport default class WorkflowMention extends MentionableModel<object, AtMentionFormat> {\n  type(): string {\n    return 'workflow';\n  }\n\n  initialResults(): object[] {\n    return [{ id: 'workflow' }, { id: 'Workflow' }];\n  }\n\n  /**\n   * Automatically determines which mention syntax to be used based on the option in the\n   * admin dashboard. Also performs display name clean-up automatically.\n   *\n   * @\"Display name\"#UserID or `@username`\n   *\n   * @example <caption>New display name syntax</caption>\n   * // '@\"user\"#1'\n   * forUser(User) // User is ID 1, display name is 'User'\n   *\n   * @example <caption>Using old syntax</caption>\n   * // '@username'\n   * forUser(user) // User's username is 'username'\n   */\n  public replacement(asting: object): string {\n    return this.format.format('workflow', null, null);\n  }\n\n  suggestion(astring: object, typed: string): Mithril.Children {\n    return <>workflow</>;\n  }\n\n  matches(astring: object, typed: string): boolean {\n    console.log('astring', astring);\n    console.log('typed', typed);\n\n    if (!typed) return false;\n\n    if ('workflow'.substr(0, typed.length) === typed || 'Workflow'.substr(0, typed.length) === typed) {\n      return true;\n    }\n    return false;\n  }\n\n  maxStoreMatchedResults(): null {\n    return null;\n  }\n\n  async search(typed: string): Promise<object[]> {\n    return await [{ id: 'dwndk' }];\n  }\n\n  enabled(): boolean {\n    return true;\n  }\n}\n","import MentionFormat from './MentionFormat';\nimport type MentionableModel from '../MentionableModel';\nimport UserMention from '../UserMention';\nimport PostMention from '../PostMention';\nimport GroupMention from '../GroupMention';\nimport WorkflowMention from '../WorkflowMention';\nexport default class AtMentionFormat extends MentionFormat {\n  public mentionables: (new (...args: any[]) => MentionableModel)[] = [UserMention, PostMention, GroupMention, WorkflowMention];\n  protected extendable: boolean = true;\n\n  public trigger(): string {\n    return '@';\n  }\n\n  public queryFromTyped(typed: string): string | null {\n    const matchTyped = typed.match(/^[\"]?((?:(?!\"#).)+)$/);\n\n    return matchTyped ? matchTyped[1] : null;\n  }\n\n  public format(name: string, char: string | null = '', id: string | null = null): string {\n    return {\n      simple: `@${name}`,\n      safe: `@\"${name}\"#${char}${id}`,\n    }[id ? 'safe' : 'simple'];\n  }\n}\n","import app from 'flarum/forum/app';\nimport Badge from 'flarum/common/components/Badge';\nimport highlight from 'flarum/common/helpers/highlight';\nimport type Tag from 'flarum/tags/common/models/Tag';\nimport type Mithril from 'mithril';\nimport MentionableModel from './MentionableModel';\nimport type HashMentionFormat from './formats/HashMentionFormat';\n\nexport default class TagMention extends MentionableModel<Tag, HashMentionFormat> {\n  type(): string {\n    return 'tag';\n  }\n\n  initialResults(): Tag[] {\n    return Array.from(app.store.all<Tag>('tags'));\n  }\n\n  /**\n   * Generates the mention syntax for a tag mention.\n   *\n   * ~tagSlug\n   *\n   * @example <caption>Tag mention</caption>\n   * // ~general\n   * forTag(tag) // Tag display name is 'Tag', tag ID is 5\n   */\n  public replacement(tag: Tag): string {\n    return this.format.format(tag.slug());\n  }\n\n  matches(model: Tag, typed: string): boolean {\n    if (!typed) return false;\n\n    const names = [model.name().toLowerCase()];\n\n    return names.some((name) => name.toLowerCase().substr(0, typed.length) === typed);\n  }\n\n  maxStoreMatchedResults(): null {\n    return null;\n  }\n\n  async search(typed: string): Promise<Tag[]> {\n    return await app.store.find<Tag[]>('tags', { filter: { q: typed }, page: { limit: 5 } });\n  }\n\n  suggestion(model: Tag, typed: string): Mithril.Children {\n    let tagName: Mithril.Children = model.name();\n\n    if (typed) {\n      tagName = highlight(tagName, typed);\n    }\n\n    return (\n      <>\n        <Badge className=\"Avatar\" icon={model.icon()} color={model.color()} type=\"tag\" />\n        <span className=\"username\">{tagName}</span>\n      </>\n    );\n  }\n\n  enabled(): boolean {\n    return 'flarum-tags' in flarum.extensions;\n  }\n}\n","import MentionFormat from './MentionFormat';\nimport MentionableModel from '../MentionableModel';\nimport TagMention from '../TagMention';\n\nexport default class HashMentionFormat extends MentionFormat {\n  public mentionables: (new (...args: any[]) => MentionableModel)[] = [TagMention];\n  protected extendable: boolean = true;\n\n  public trigger(): string {\n    return '#';\n  }\n\n  public queryFromTyped(typed: string): string | null {\n    const matchTyped = typed.match(/^[-_\\p{L}\\p{N}\\p{M}]+$/giu);\n\n    return matchTyped ? matchTyped[0] : null;\n  }\n\n  public format(slug: string): string {\n    return `#${slug}`;\n  }\n}\n","import AtMentionFormat from './AtMentionFormat';\nimport HashMentionFormat from './HashMentionFormat';\nimport type MentionFormat from './MentionFormat';\nimport MentionableModel from '../MentionableModel';\n\nexport default class MentionFormats {\n  protected formats: MentionFormat[] = [new AtMentionFormat(), new HashMentionFormat()];\n\n  public get(symbol: string): MentionFormat | null {\n    return this.formats.find((f) => f.trigger() === symbol) ?? null;\n  }\n\n  public mentionable(type: string): MentionableModel | null {\n    for (const format of this.formats) {\n      const mentionable = format.getMentionable(type);\n\n      if (mentionable) return mentionable;\n    }\n\n    return null;\n  }\n\n  public extend(format: new () => MentionFormat) {\n    this.formats.push(new format());\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostsUserPage'];","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n\n/**\n * The `MentionsUserPage` component shows post which user Mentioned at\n */\nexport default class MentionsUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param {Integer} [offset] The position to start getting results from.\n   * @return {Promise}\n   * @protected\n   */\n  loadResults(offset) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        mentioned: this.user.id(),\n      },\n      page: { offset, limit: this.loadLimit },\n      sort: '-createdAt',\n    });\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\nimport MentionsUserPage from './components/MentionsUserPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('user.mentions', '/u/:username/mentions', MentionsUserPage),\n\n  new Extend.Model(Post) //\n    .hasMany<Post>('mentionedBy')\n    .attribute<number>('mentionedByCount'),\n\n  new Extend.Model(User) //\n    .attribute<boolean>('canMentionGroups'),\n];\n","import app from 'flarum/forum/app';\nimport username from 'flarum/common/helpers/username';\nimport extractText from 'flarum/common/utils/extractText';\n\nexport function filterUserMentions(tag) {\n  let user;\n\n  if (app.forum.attribute('allowUsernameMentionFormat') && tag.hasAttribute('username'))\n    user = app.store.getBy('users', 'username', tag.getAttribute('username'));\n  else if (tag.hasAttribute('id')) user = app.store.getById('users', tag.getAttribute('id'));\n\n  if (user) {\n    tag.setAttribute('id', user.id());\n    tag.setAttribute('slug', user.slug());\n    tag.setAttribute('displayname', extractText(username(user)));\n\n    return true;\n  }\n\n  tag.invalidate();\n}\n\nexport function postFilterUserMentions(tag) {\n  tag.setAttribute('deleted', false);\n}\n\nexport function filterPostMentions(tag) {\n  const post = app.store.getById('posts', tag.getAttribute('id'));\n\n  if (post) {\n    tag.setAttribute('discussionid', post.discussion().id());\n    tag.setAttribute('number', post.number());\n    tag.setAttribute('displayname', extractText(username(post.user())));\n\n    return true;\n  }\n}\n\nexport function postFilterPostMentions(tag) {\n  tag.setAttribute('deleted', false);\n}\n\nexport function filterGroupMentions(tag) {\n  if (app.session?.user?.canMentionGroups()) {\n    const group = app.store.getById('groups', tag.getAttribute('id'));\n\n    if (group) {\n      tag.setAttribute('groupname', extractText(group.namePlural()));\n\n      return true;\n    }\n  }\n\n  tag.invalidate();\n}\n\nexport function postFilterGroupMentions(tag) {\n  if (app.session?.user?.canMentionGroups()) {\n    const group = app.store.getById('groups', tag.getAttribute('id'));\n\n    tag.setAttribute('color', group.color());\n    tag.setAttribute('icon', group.icon());\n    tag.setAttribute('deleted', false);\n  }\n}\n\nexport function filterTagMentions(tag) {\n  if ('flarum-tags' in flarum.extensions) {\n    const model = app.store.getBy('tags', 'slug', tag.getAttribute('slug'));\n\n    if (model) {\n      tag.setAttribute('id', model.id());\n      tag.setAttribute('tagname', model.name());\n\n      return true;\n    }\n  }\n\n  tag.invalidate();\n}\n\nexport function postFilterTagMentions(tag) {\n  if ('flarum-tags' in flarum.extensions) {\n    const model = app.store.getBy('tags', 'slug', tag.getAttribute('slug'));\n\n    tag.setAttribute('icon', model.icon());\n    tag.setAttribute('color', model.color());\n    tag.setAttribute('deleted', false);\n  }\n}\n","import GroupMentionedNotification from './components/GroupMentionedNotification';\nimport MentionsUserPage from './components/MentionsUserPage';\nimport PostMentionedNotification from './components/PostMentionedNotification';\nimport UserMentionedNotification from './components/UserMentionedNotification';\nimport AutocompleteDropdown from './fragments/AutocompleteDropdown';\nimport PostQuoteButton from './fragments/PostQuoteButton';\nimport getCleanDisplayName from './utils/getCleanDisplayName';\nimport getMentionText from './utils/getMentionText';\nimport * as reply from './utils/reply';\nimport selectedText from './utils/selectedText';\nimport * as textFormatter from './utils/textFormatter';\nimport MentionableModel from './mentionables/MentionableModel';\nimport MentionFormat from './mentionables/formats/MentionFormat';\nimport Mentionables from './extenders/Mentionables';\n\nexport default {\n  'mentions/components/MentionsUserPage': MentionsUserPage,\n  'mentions/components/PostMentionedNotification': PostMentionedNotification,\n  'mentions/components/UserMentionedNotification': UserMentionedNotification,\n  'mentions/components/GroupMentionedNotification': GroupMentionedNotification,\n  'mentions/fragments/AutocompleteDropdown': AutocompleteDropdown,\n  'mentions/fragments/PostQuoteButton': PostQuoteButton,\n  'mentions/utils/getCleanDisplayName': getCleanDisplayName,\n  'mentions/utils/getMentionText': getMentionText,\n  'mentions/utils/reply': reply,\n  'mentions/utils/selectedText': selectedText,\n  'mentions/utils/textFormatter': textFormatter,\n  'mentions/mentionables/MentionableModel': MentionableModel,\n  'mentions/mentionables/formats/MentionFormat': MentionFormat,\n  'mentions/extenders/Mentionables': Mentionables,\n};\n","import app from 'flarum/forum/app';\n\n/**\n * Fetches the mention text for a specified user (and optionally a post ID for replies or group).\n *\n * Automatically determines which mention syntax to be used based on the option in the\n * admin dashboard. Also performs display name clean-up automatically.\n *\n * @deprecated Use `app.mentionables.get('user').replacement(user)` instead. Will be removed in 2.0.\n */\nexport default function getMentionText(user, postId, group) {\n  if (user !== undefined && postId === undefined) {\n    return app.mentionables.get('user').replacement(user);\n  } else if (user !== undefined && postId !== undefined) {\n    return app.mentionables.get('post').replacement(app.store.getById('posts', postId));\n  } else if (group !== undefined) {\n    return app.mentionables.get('group').replacement(group);\n  }\n\n  throw 'No parameters were passed';\n}\n","import type ForumApplication from 'flarum/forum/ForumApplication';\nimport type IExtender from 'flarum/common/extenders/IExtender';\nimport type MentionableModel from '../mentionables/MentionableModel';\nimport type MentionFormat from '../mentionables/formats/MentionFormat';\n\nexport default class Mentionables implements IExtender<ForumApplication> {\n  protected formats: (new () => MentionFormat)[] = [];\n  protected mentionables: Record<string, (new (...args: any[]) => MentionableModel)[]> = {};\n\n  /**\n   * Register a new mention format.\n   * Must extend MentionFormat and have a unique unused trigger symbol.\n   */\n  format(format: new () => MentionFormat): this {\n    this.formats.push(format);\n\n    return this;\n  }\n\n  /**\n   * Register a new mentionable model to a mention format.\n   * Only works if the format has already been registered,\n   *  and the format allows using multiple mentionables.\n   *\n   * @param symbol The trigger symbol of the format to extend (ex: @).\n   * @param mentionable The mentionable instance to register.\n   *                    Must extend MentionableModel.\n   */\n  mentionable(symbol: string, mentionable: new (...args: any[]) => MentionableModel): this {\n    if (!this.mentionables[symbol]) {\n      this.mentionables[symbol] = [];\n    }\n\n    this.mentionables[symbol].push(mentionable);\n\n    return this;\n  }\n\n  extend(app: ForumApplication): void {\n    for (const format of this.formats) {\n      app.mentionFormats.extend(format);\n    }\n\n    for (const symbol in this.mentionables) {\n      const format = app.mentionFormats.get(symbol);\n\n      if (!format) continue;\n\n      for (const mentionable of this.mentionables[symbol]) {\n        format.extend(mentionable);\n      }\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport { getPlainContent } from 'flarum/common/utils/string';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport Post from 'flarum/forum/components/Post';\n\nimport addPostMentionPreviews from './addPostMentionPreviews';\nimport addMentionedByList from './addMentionedByList';\nimport addPostReplyAction from './addPostReplyAction';\nimport addPostQuoteButton from './addPostQuoteButton';\nimport addComposerAutocomplete from './addComposerAutocomplete';\nimport PostMentionedNotification from './components/PostMentionedNotification';\nimport UserMentionedNotification from './components/UserMentionedNotification';\nimport GroupMentionedNotification from './components/GroupMentionedNotification';\nimport MentionFormats from './mentionables/formats/MentionFormats';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\n\napp.mentionFormats = new MentionFormats();\n\nexport { default as extend } from './extend';\n\napp.initializers.add('flarum-mentions', function () {\n  // For every mention of a post inside a post's content, set up a hover handler\n  // that shows a preview of the mentioned post.\n  addPostMentionPreviews();\n\n  // In the footer of each post, show information about who has replied (i.e.\n  // who the post has been mentioned by).\n  addMentionedByList();\n\n  // Add a 'reply' control to the footer of each post. When clicked, it will\n  // open up the composer and add a post mention to its contents.\n  addPostReplyAction();\n\n  // Show a Quote button when Post text is selected\n  addPostQuoteButton();\n\n  // After typing '@' in the composer, show a dropdown suggesting a bunch of\n  // posts or users that the user could mention.\n  addComposerAutocomplete();\n\n  app.notificationComponents.postMentioned = PostMentionedNotification;\n  app.notificationComponents.userMentioned = UserMentionedNotification;\n  app.notificationComponents.groupMentioned = GroupMentionedNotification;\n\n  // Add notification preferences.\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('postMentioned', {\n      name: 'postMentioned',\n      icon: 'fas fa-reply',\n      label: app.translator.trans('flarum-mentions.forum.settings.notify_post_mentioned_label'),\n    });\n\n    items.add('userMentioned', {\n      name: 'userMentioned',\n      icon: 'fas fa-at',\n      label: app.translator.trans('flarum-mentions.forum.settings.notify_user_mentioned_label'),\n    });\n\n    items.add('groupMentioned', {\n      name: 'groupMentioned',\n      icon: 'fas fa-at',\n      label: app.translator.trans('flarum-mentions.forum.settings.notify_group_mentioned_label'),\n    });\n  });\n\n  // Add mentions tab in user profile\n  extend(UserPage.prototype, 'navItems', function (items) {\n    const user = this.user;\n    items.add(\n      'mentions',\n      <LinkButton href={app.route('user.mentions', { username: user.slug() })} name=\"mentions\" icon=\"fas fa-at\">\n        {app.translator.trans('flarum-mentions.forum.user.mentions_link')}\n      </LinkButton>,\n      80\n    );\n  });\n\n  // Remove post mentions when rendering post previews.\n  getPlainContent.removeSelectors.push('a.PostMention');\n\n  // Apply color contrast fix on group mentions.\n  extend(Post.prototype, 'oncreate', function () {\n    this.$('.GroupMention--colored, .TagMention--colored').each(function () {\n      this.classList.add(textContrastClass(getComputedStyle(this).getPropertyValue('--color')));\n    });\n  });\n});\n\nexport * from './utils/textFormatter';\n\n// Expose compat API\nimport mentionsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, mentionsCompat);\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\n\nimport AutocompleteDropdown from './fragments/AutocompleteDropdown';\nimport MentionableModels from './mentionables/MentionableModels';\n\nexport default function addComposerAutocomplete() {\n  const $container = $('<div class=\"ComposerBody-mentionsDropdownContainer\"></div>');\n  const dropdown = new AutocompleteDropdown();\n\n  extend(TextEditor.prototype, 'oncreate', function () {\n    const $editor = this.$('.TextEditor-editor').wrap('<div class=\"ComposerBody-mentionsWrapper\"></div>');\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when(() => dropdown.active)\n      .onUp(() => dropdown.navigate(-1))\n      .onDown(() => dropdown.navigate(1))\n      .onSelect(dropdown.complete.bind(dropdown))\n      .onCancel(dropdown.hide.bind(dropdown))\n      .bindTo($editor);\n\n    $editor.after($container);\n  });\n\n  extend(TextEditor.prototype, 'buildEditorParams', function (params) {\n    let relMentionStart;\n    let absMentionStart;\n    let matchTyped;\n\n    let mentionables = new MentionableModels({\n      onmouseenter: function () {\n        dropdown.setIndex($(this).parent().index());\n      },\n      onclick: (replacement) => {\n        this.attrs.composer.editor.replaceBeforeCursor(absMentionStart - 1, replacement + ' ');\n\n        dropdown.hide();\n      },\n    });\n\n    const suggestionsInputListener = () => {\n      const selection = this.attrs.composer.editor.getSelectionRange();\n\n      const cursor = selection[0];\n\n      if (selection[1] - cursor > 0) return;\n\n      // Search backwards from the cursor for a mention triggering symbol. If we find one,\n      // we will want to show the correct autocomplete dropdown!\n      // Check classes implementing the IMentionableModel interface to see triggering symbols.\n      const lastChunk = this.attrs.composer.editor.getLastNChars(30);\n      absMentionStart = 0;\n      let activeFormat = null;\n      for (let i = lastChunk.length - 1; i >= 0; i--) {\n        const character = lastChunk.substr(i, 1);\n        activeFormat = app.mentionFormats.get(character);\n\n        if (activeFormat && (i === 0 || /\\s/.test(lastChunk.substr(i - 1, 1)))) {\n          relMentionStart = i + 1;\n          absMentionStart = cursor - lastChunk.length + i + 1;\n          mentionables.init(activeFormat.makeMentionables());\n          break;\n        }\n      }\n\n      dropdown.hide();\n      dropdown.active = false;\n\n      if (absMentionStart) {\n        const typed = lastChunk.substring(relMentionStart).toLowerCase();\n        matchTyped = activeFormat.queryFromTyped(typed);\n\n        if (!matchTyped) return;\n\n        mentionables.typed = matchTyped;\n\n        const buildSuggestions = () => {\n          // If the user has started to type a mention,\n          // then suggest models matching.\n          const suggestions = mentionables.buildSuggestions();\n\n          if (suggestions.length) {\n            dropdown.items = suggestions;\n            m.render($container[0], dropdown.render());\n\n            dropdown.show();\n            const coordinates = this.attrs.composer.editor.getCaretCoordinates(absMentionStart);\n            const width = dropdown.$().outerWidth();\n            const height = dropdown.$().outerHeight();\n            const parent = dropdown.$().offsetParent();\n            let left = coordinates.left;\n            let top = coordinates.top + 15;\n\n            // Keep the dropdown inside the editor.\n            if (top + height > parent.height()) {\n              top = coordinates.top - height - 15;\n            }\n            if (left + width > parent.width()) {\n              left = parent.width() - width;\n            }\n\n            // Prevent the dropdown from going off screen on mobile\n            top = Math.max(-(parent.offset().top - $(document).scrollTop()), top);\n            left = Math.max(-parent.offset().left, left);\n\n            dropdown.show(left, top);\n          } else {\n            dropdown.active = false;\n            dropdown.hide();\n          }\n        };\n\n        dropdown.active = true;\n\n        buildSuggestions();\n\n        dropdown.setIndex(0);\n        dropdown.$().scrollTop(0);\n\n        mentionables.search()?.then(buildSuggestions);\n      }\n    };\n\n    params.inputListeners.push(suggestionsInputListener);\n  });\n\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    items.add(\n      'mention',\n      <TextEditorButton onclick={() => this.attrs.composer.editor.insertAtCursor(' @')} icon=\"fas fa-at\">\n        {app.translator.trans('flarum-mentions.forum.composer.mention_tooltip')}\n      </TextEditorButton>\n    );\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostPreview from 'flarum/forum/components/PostPreview';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default function addPostMentionPreviews() {\n  function addPreviews() {\n    const contentHtml = this.attrs.post.contentHtml();\n\n    if (contentHtml === this.oldPostContentHtml || this.isEditing()) return;\n\n    this.oldPostContentHtml = contentHtml;\n\n    const parentPost = this.attrs.post;\n    const $parentPost = this.$();\n\n    this.$().on(\n      'click',\n      '.UserMention:not(.UserMention--deleted), .PostMention:not(.PostMention--deleted), .TagMention:not(.TagMention--deleted)',\n      function (e) {\n        m.route.set(this.getAttribute('href'));\n        e.preventDefault();\n      }\n    );\n\n    this.$('.PostMention:not(.PostMention--deleted)').each(function () {\n      const $this = $(this);\n      const id = $this.data('id');\n      let timeout;\n\n      // Wrap the mention link in a wrapper element so that we can insert a\n      // preview popup as its sibling and relatively position it.\n      const $preview = $('<ul class=\"Dropdown-menu PostMention-preview fade\"/>');\n      $parentPost.append($preview);\n\n      const getPostElement = () => {\n        return $(`.PostStream-item[data-id=\"${id}\"]`);\n      };\n\n      const showPreview = () => {\n        // When the user hovers their mouse over the mention, look for the\n        // post that it's referring to in the stream, and determine if it's\n        // in the viewport. If it is, we will \"pulsate\" it.\n        const $post = getPostElement();\n        let visible = false;\n        if ($post.length) {\n          const top = $post.offset().top;\n          const scrollTop = window.pageYOffset;\n          if (top > scrollTop && top + $post.height() < scrollTop + $(window).height()) {\n            $post.addClass('pulsate');\n            visible = true;\n          }\n        }\n\n        // Otherwise, we will show a popup preview of the post. If the post\n        // hasn't yet been loaded, we will need to do that.\n        if (!visible) {\n          // Position the preview so that it appears above the mention.\n          // (The offsetParent should be .Post-body.)\n          const positionPreview = () => {\n            const previewHeight = $preview.outerHeight(true);\n            let offset = 0;\n\n            // If the preview goes off the top of the viewport, reposition it to\n            // be below the mention.\n            if ($this.offset().top - previewHeight < $(window).scrollTop() + $('#header').outerHeight()) {\n              offset += $this.outerHeight(true);\n            } else {\n              offset -= previewHeight;\n            }\n\n            $preview\n              .show()\n              .css('top', $this.offset().top - $parentPost.offset().top + offset)\n              .css('left', $this.offsetParent().offset().left - $parentPost.offset().left)\n              .css('max-width', $this.offsetParent().width());\n          };\n\n          const showPost = (post) => {\n            const discussion = post.discussion();\n\n            m.render($preview[0], [\n              discussion !== parentPost.discussion() && (\n                <li>\n                  <span className=\"PostMention-preview-discussion\">{discussion.title()}</span>\n                </li>\n              ),\n              <li>\n                <PostPreview post={post} />\n              </li>,\n            ]);\n            positionPreview();\n          };\n\n          const post = app.store.getById('posts', id);\n          if (post && post.discussion()) {\n            showPost(post);\n          } else {\n            m.render($preview[0], <LoadingIndicator />);\n            app.store.find('posts', id).then(showPost);\n            positionPreview();\n          }\n\n          setTimeout(() => $preview.off('transitionend').addClass('in'));\n        }\n      };\n\n      const hidePreview = () => {\n        getPostElement().removeClass('pulsate');\n        if ($preview.hasClass('in')) {\n          $preview.removeClass('in').one('transitionend', () => $preview.hide());\n        }\n      };\n\n      // On a touch (mobile) device we cannot hover the link to reveal the preview.\n      // Instead we cancel the navigation so that a click reveals the preview.\n      // Users can then click on the preview to go to the post if desired.\n      $this.on('touchend', (e) => {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      });\n\n      $this\n        .add($preview)\n        .hover(\n          () => {\n            clearTimeout(timeout);\n            timeout = setTimeout(showPreview, 250);\n          },\n          () => {\n            clearTimeout(timeout);\n            getPostElement().removeClass('pulsate');\n            timeout = setTimeout(hidePreview, 250);\n          }\n        )\n        .on('touchend', (e) => {\n          showPreview();\n          e.stopPropagation();\n        });\n\n      $(document).on('touchend', hidePreview);\n    });\n  }\n\n  extend(CommentPost.prototype, 'oncreate', addPreviews);\n  extend(CommentPost.prototype, 'onupdate', addPreviews);\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Link from 'flarum/common/components/Link';\nimport PostPreview from 'flarum/forum/components/PostPreview';\nimport punctuateSeries from 'flarum/common/helpers/punctuateSeries';\nimport username from 'flarum/common/helpers/username';\nimport icon from 'flarum/common/helpers/icon';\nimport Button from 'flarum/common/components/Button';\nimport MentionedByModal from './components/MentionedByModal';\n\nexport default function addMentionedByList() {\n  function hidePreview() {\n    this.$('.Post-mentionedBy-preview')\n      .removeClass('in')\n      .one('transitionend', function () {\n        $(this).hide();\n      });\n  }\n\n  extend(CommentPost.prototype, 'oncreate', function () {\n    let timeout;\n    const post = this.attrs.post;\n    const replies = post.mentionedBy();\n\n    if (replies && replies.length) {\n      const $preview = $('<ul class=\"Dropdown-menu Post-mentionedBy-preview fade\"/>');\n      this.$().append($preview);\n\n      const $parentPost = this.$();\n      const $this = this.$('.Post-mentionedBy');\n\n      const showPreview = () => {\n        if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n        // When the user hovers their mouse over the list of people who have\n        // replied to the post, render a list of reply previews into a\n        // popup.\n        m.render(\n          $preview[0],\n          <>\n            {replies.map((reply) => (\n              <li data-number={reply.number()}>\n                <PostPreview post={reply} onclick={hidePreview.bind(this)} />\n              </li>\n            ))}\n            {replies.length < post.mentionedByCount() && (\n              <li className=\"Post-mentionedBy-preview-more\">\n                <Button\n                  className=\"PostPreview Button\"\n                  onclick={() => {\n                    hidePreview.call(this);\n                    app.modal.show(MentionedByModal, { post });\n                  }}\n                >\n                  <span className=\"PostPreview-content\">\n                    <span className=\"PostPreview-badge Avatar\">{icon('fas fa-reply-all')}</span>\n                    <span>\n                      {app.translator.trans('flarum-mentions.forum.post.mentioned_by_more_text', { count: post.mentionedByCount() - replies.length })}\n                    </span>\n                  </span>\n                </Button>\n              </li>\n            )}\n          </>\n        );\n\n        $preview\n          .show()\n          .css('top', $this.offset().top - $parentPost.offset().top + $this.outerHeight(true))\n          .css('left', $this.offsetParent().offset().left - $parentPost.offset().left)\n          .css('max-width', $parentPost.width());\n\n        setTimeout(() => $preview.off('transitionend').addClass('in'));\n      };\n\n      $this.add($preview).hover(\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(showPreview, 250);\n        },\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n      // Whenever the user hovers their mouse over a particular name in the\n      // list of repliers, highlight the corresponding post in the preview\n      // popup.\n      this.$()\n        .find('.Post-mentionedBy-summary a')\n        .hover(\n          function () {\n            $preview.find('[data-number=\"' + $(this).data('number') + '\"]').addClass('active');\n          },\n          function () {\n            $preview.find('[data-number]').removeClass('active');\n          }\n        );\n    }\n  });\n\n  extend(CommentPost.prototype, 'footerItems', function (items) {\n    const post = this.attrs.post;\n    const replies = post.mentionedBy();\n\n    if (replies && replies.length) {\n      const users = [];\n      const repliers = replies\n        .sort((reply) => (reply.user() === app.session.user ? -1 : 0))\n        .filter((reply) => {\n          const user = reply.user();\n          if (users.indexOf(user) === -1) {\n            users.push(user);\n            return true;\n          }\n        });\n\n      const limit = 4;\n      const overLimit = post.mentionedByCount() > limit;\n\n      // Create a list of unique users who have replied. So even if a user has\n      // replied twice, they will only be in this array once.\n      const names = repliers.slice(0, overLimit ? limit - 1 : limit).map((reply) => {\n        const user = reply.user();\n\n        return (\n          <Link href={app.route.post(reply)} onclick={hidePreview.bind(this)} data-number={reply.number()}>\n            {app.session.user === user ? app.translator.trans('flarum-mentions.forum.post.you_text') : username(user)}\n          </Link>\n        );\n      });\n\n      // If there are more users that we've run out of room to display, add a \"x\n      // others\" name to the end of the list. Clicking on it will display a modal\n      // with a full list of names.\n      if (overLimit) {\n        const count = post.mentionedByCount() - names.length;\n\n        names.push(app.translator.trans('flarum-mentions.forum.post.others_text', { count }));\n      }\n\n      items.add(\n        'replies',\n        <div className=\"Post-mentionedBy\">\n          <span className=\"Post-mentionedBy-summary\">\n            {icon('fas fa-reply')}\n            {app.translator.trans(`flarum-mentions.forum.post.mentioned_by${repliers[0].user() === app.session.user ? '_self' : ''}_text`, {\n              count: names.length,\n              users: punctuateSeries(names),\n            })}\n          </span>\n        </div>\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport CommentPost from 'flarum/forum/components/CommentPost';\n\nimport reply from './utils/reply';\n\nexport default function () {\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    const post = this.attrs.post;\n\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\n\n    items.add(\n      'reply',\n      <Button className=\"Button Button--link\" onclick={() => reply(post)}>\n        {app.translator.trans('flarum-mentions.forum.post.reply_link')}\n      </Button>\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\n\nimport PostQuoteButton from './fragments/PostQuoteButton';\nimport selectedText from './utils/selectedText';\n\nexport default function addPostQuoteButton() {\n  extend(CommentPost.prototype, 'oncreate', function () {\n    const post = this.attrs.post;\n\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\n\n    const $postBody = this.$('.Post-body');\n\n    // Wrap the quote button in a wrapper element so that we can render\n    // button into it.\n    const $container = $('<div class=\"Post-quoteButtonContainer\"></div>');\n\n    const button = new PostQuoteButton(post);\n\n    const handler = function (e) {\n      setTimeout(() => {\n        const content = selectedText($postBody);\n        if (content) {\n          button.content = content;\n          m.render($container[0], button.render());\n\n          const rects = window.getSelection().getRangeAt(0).getClientRects();\n          const firstRect = rects[0];\n\n          if (e.clientY < firstRect.bottom && e.clientX - firstRect.right < firstRect.left - e.clientX) {\n            button.showStart(firstRect.left, firstRect.top);\n          } else {\n            const lastRect = rects[rects.length - 1];\n            button.showEnd(lastRect.right, lastRect.bottom);\n          }\n        }\n      }, 1);\n    };\n\n    this.$().after($container).on('mouseup', handler);\n\n    if ('ontouchstart' in window) {\n      document.addEventListener('selectionchange', handler, false);\n    }\n  });\n}\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","flarum","core","compat","_setPrototypeOf","bind","_inheritsLoose","subClass","superClass","_extends","assign","target","arguments","source","apply","_defineProperties","props","descriptor","input","hint","prim","toPrimitive","res","String","MentionedByModalState","_PaginatedListState","params","page","limit","Constructor","protoProps","PaginatedListState","MentionedByModal","_Modal","_proto","oninit","vnode","state","filter","mentionedPost","attrs","post","id","sort","refresh","className","title","app","trans","content","_this","m","'['","isInitialLoading","LoadingIndicator","getPages","map","items","reply","number","PostPreview","onclick","close","hasNext","Button","loadNext","loading","isLoadingNext","Modal","insertMention","composer","quote","mention","mentionable","replacement","fields","body","originalContent","cursorPosition","editor","getSelectionRange","preceding","precedingNewlines","match","insertAtCursor","Array","join","trim","replace","bodyMatches","EditPostComposer","discussion","DiscussionControls","PostQuoteButton","_Fragment","view","_this2","icon","show","left","top","$this","$","parentOffset","offsetParent","offset","css","hideHandler","hide","document","on","showStart","window","scrollTop","outerHeight","showEnd","right","bottom","outerWidth","off","Fragment","selectedText","selection","getSelection","isCollapsed","range","getRangeAt","parent","commonAncestorContainer","contains","clone","append","cloneContents","find","replaceWith","alt","src","innerText","href","text","AutocompleteDropdown","_len","args","_key","concat","active","index","keyWasJustPressed","item","navigate","delta","setIndex","clearTimeout","keyWasJustPressedTimeout","setTimeout","eq","click","scrollToItem","$dropdown","$items","rangedIndex","$item","removeClass","addClass","dropdownScroll","dropdownTop","dropdownBottom","itemTop","itemBottom","parseInt","animate","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","self","err","MentionsDropdownItem","_Component","_this$attrs","_excluded","classList","children","Component","MentionableModels","dropdownItemAttrs","mentionables","results","typed","searched","search","throttle","_callee","typedLower","_iterator","_step","_iterator2","_step2","model","_context","toLowerCase","includes","_createForOfIteratorHelperLoose","console","log","set","t0","t1","has","init","_step3","_iterator3","Map","initialResults","result","matches","_this$typed","makeSuggestion","suggestion","_this$dropdownItemAtt","buildSuggestions","suggestions","_step4","_loop","enabled","from","max","maxStoreMatchedResults","splice","_step5","_iterator5","dropdownItem","_iterator4","PostMentionedNotification","_Notification","notification","subject","replyNumber","user","fromUser","count","excerpt","truncate","contentPlain","Notification","UserMentionedNotification","GroupMentionedNotification","MentionFormat","instances","extendable","makeMentionables","_this$instances","Mentionable","getMentionable","_this$makeMentionable","extend","MentionableModel","format","getDeletedUserText","extractText","getCleanDisplayName","useDisplayName","username","UserMention","_MentionableModel","all","attribute","cleanText","_username$text","usernameHelper","highlight","avatar","some","substr","_search","q","_x","PostMention","ReplyComposer","composerAttrs","composerPost","posts","contentType","b","createdAt","getTime","_model$contentPlain","userMentionable","GroupMention","Group","group","namePlural","groupName","Badge","color","nameSingular","_app$session$user$can","_app$session","canMentionGroups","WorkflowMention","asting","astring","AtMentionFormat","_MentionFormat","trigger","queryFromTyped","matchTyped","char","simple","safe","TagMention","tag","slug","tagName","extensions","HashMentionFormat","MentionFormats","formats","symbol","_this$formats$find","MentionsUserPage","_PostsUserPage","loadResults","mentioned","loadLimit","PostsUserPage","Extend","add","Post","hasMany","User","filterUserMentions","hasAttribute","getBy","getAttribute","getById","setAttribute","invalidate","postFilterUserMentions","filterPostMentions","postFilterPostMentions","filterGroupMentions","postFilterGroupMentions","_app$session2","filterTagMentions","postFilterTagMentions","postId","textFormatter","Mentionables","mentionFormats","$container","dropdown","addPreviews","contentHtml","oldPostContentHtml","isEditing","parentPost","$parentPost","route","preventDefault","each","timeout","data","$preview","getPostElement","showPreview","$post","visible","pageYOffset","height","positionPreview","previewHeight","width","showPost","render","store","hidePreview","hasClass","one","cancelable","hover","stopPropagation","CommentPost","addPostMentionPreviews","replies","mentionedBy","is","mentionedByCount","users","repliers","overLimit","names","Link","punctuateSeries","addMentionedByList","isHidden","canReply","$postBody","button","handler","rects","getClientRects","firstRect","clientY","clientX","lastRect","after","addEventListener","TextEditor","$editor","navigator","KeyboardNavigatable","when","onUp","onDown","onSelect","onCancel","bindTo","relMentionStart","absMentionStart","onmouseenter","replaceBeforeCursor","inputListeners","cursor","lastChunk","getLastNChars","activeFormat","character","test","_mentionables$search","substring","coordinates","getCaretCoordinates","Math","TextEditorButton","postMentioned","userMentioned","groupMentioned","NotificationGrid","label","UserPage","LinkButton","getPlainContent","removeSelectors","textContrastClass","getComputedStyle","getPropertyValue","mentionsCompat"],"sourceRoot":""}